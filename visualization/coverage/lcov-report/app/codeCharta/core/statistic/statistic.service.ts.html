<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for app/codeCharta/core/statistic/statistic.service.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../../index.html">All files</a> / <a href="index.html">app/codeCharta/core/statistic</a> statistic.service.ts
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">96.69% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>117/121</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">92.55% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>87/94</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>13/13</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">96.67% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>116/120</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">30x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">30x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">30x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">30x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">120x</span>
<span class="cline-any cline-yes">120x</span>
<span class="cline-any cline-yes">330x</span>
<span class="cline-any cline-yes">150x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">180x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">120x</span>
<span class="cline-any cline-yes">120x</span>
<span class="cline-any cline-yes">180x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">120x</span>
<span class="cline-any cline-yes">60x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">60x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">90x</span>
<span class="cline-any cline-yes">110x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">110x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">75x</span>
<span class="cline-any cline-yes">75x</span>
<span class="cline-any cline-yes">75x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">90x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">120x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">120x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">60x</span>
<span class="cline-any cline-yes">180x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">60x</span>
<span class="cline-any cline-yes">90x</span>
<span class="cline-any cline-yes">160x</span>
<span class="cline-any cline-yes">90x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">120x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">55x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">45x</span>
<span class="cline-any cline-yes">20x</span>
<span class="cline-any cline-yes">35x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">25x</span>
<span class="cline-any cline-yes">25x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">55x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">55x</span>
<span class="cline-any cline-yes">25x</span>
<span class="cline-any cline-yes">75x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">30x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">20x</span>
<span class="cline-any cline-yes">35x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">55x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">75x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">42x</span>
<span class="cline-any cline-yes">36x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">42x</span>
<span class="cline-any cline-yes">36x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">42x</span>
<span class="cline-any cline-yes">36x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">42x</span>
<span class="cline-any cline-yes">36x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">42x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import {CodeMap, CodeMapNode} from "../data/model/CodeMap";
import {Settings} from "../../core/settings/settings.service";
import {DataModel} from "../data/data.service";
import {node} from "../../codeMap/rendering/node";
&nbsp;
&nbsp;
export enum STATISTIC_OPS  {
    NOTHING =  "NOTHING",
    MEAN = "MEAN",
    MEDIAN = "MEDIAN",
    MAX = "MAX",
    MIN = "MIN",
    FASHION = "FASHION"
};
&nbsp;
export class StatisticMapService {
&nbsp;
&nbsp;
    public static SELECTOR = "statisticMapService";
&nbsp;
    /*<span class="branch-1 cbranch-no" title="branch not covered" ></span>
     * F<span class="missing-if-branch" title="if path not taken" >I</span>unction that receives an array of maps and returns a map with a structure that contains every leaf contained in
     * any o<span class="cstat-no" title="statement not covered" >f the maps of the input</span> array.
     * The attributes of the output map contain as values the result of an statistical operation applied to the values
     * of the input maps. That operation can be selected among the implemented ones by the operation value.
     * Every new statistical operation should  have a new value in STATISTIC_OPS and a new function, which should be
     * added to the statistic function switch.
     */
    unifyMaps(data: DataModel, settings: Settings): CodeMap {
        let operation = settings.operation || STATISTIC_OPS.NOTHING;
        if(operation == STATISTIC_OPS.NOTHING){
            return data.renderMap;
        }
        var maps: CodeMap[] = data.revisions;
        if(maps.length === 1){
            return maps[0];
        }
&nbsp;
        var accumulated = {} as CodeMap;//Map that contains an array of every value of every map given in maps array
        accumulated.root = {} as CodeMapNode;
        var unified: CodeMap;
        accumulated.fileName = operation+"";
        for(let i: number=0; i&lt;maps.length; i++){//Loop through every CodeMap of the input array and get all of them in accumulated
            //Only leaf have attributes and no child.
            //A CodeMap contains fileName, projectName and root. Here filename is added to accumulated
            accumulated.fileName= accumulated.fileName+"_"+maps[i].fileName;
            //Here projectName is added
            if(!accumulated.projectName || accumulated.projectName.length === 0){
                accumulated.projectName= maps[i].projectName;
            }
            //Create an empty map which contains every different leaf and node of every map in the input
            accumulated.root = this.createArrayMap(maps[i].root, accumulated.root, maps.length);
        }
        for(let i: number=0; i&lt;maps.length; i++){
            //The empty accumulated map gets fulfilled with the values of every map in the maps array
            accumulated.root=this.fulfillMap(maps[i].root,accumulated.root, i);
        }
        unified = JSON.parse(JSON.stringify(accumulated));
        unified = this.emptyMap(unified);//The map is copied, before emptying it in order not to modify accumulated
        unified= this.applyStatistics(accumulated,unified, operation);
        return unified;
    }
&nbsp;
&nbsp;
    /*
     *  Returns a map which contains every different leaf and node of every map in the input map with an array for
     *  <span class="missing-if-branch" title="else path not taken" >E</span>every attribute with "length" zeros
     */
    createArrayMap(input: CodeMapNode, output: CodeMapNode, length: number): CodeMapNode{
        let childExist: boolean= false;
        for(let value in input){
            if(value!=="children"&amp;&amp;value!=="attributes"&amp;&amp;value!=="root"&amp;&amp;value!=="$$hashKey"){
                output[value]=input[value];
            }
            else if (value=="attributes"&amp;&amp;!output[value]){
                output[value]={};
            }
        }
        if(output.attributes&amp;&amp;output.attributes!=={}){
            for(let metric in output.attributes){
                output.attributes[metric]= Array.apply(null, Array(length));
            }
        }
        if(input.children&amp;&amp;input.children!={}){
            if (!output.children ) {//if the output have no children we add it
                output.children = [JSON.parse(JSON.stringify(input.children[0]))];
            }
            for(let i: number=0; i&lt;input.children.length; i++) {//Go through every child of the input
                //We look for the output children with the same name as the input children we are working with
                for (let j: number = 0; j &lt; output.children.length; j++) {
                    childExist = false;
                        //if the children of the input is already in the output we go through it
                    if (input.children[i].name === output.children[j].name) {
                        //We go recursiv to the children
                        output.children[j] = this.createArrayMap(input.children[i], output.children[j], length);
                        childExist = true;
                        break;
                    }
                }
                //if the children does not exist in the output its copied from the input
                if (!childExist) {
                    output.children.push(JSON.parse(JSON.stringify(input.children[i])));
                    //Once the children is copied we loop through it
                    output.children[output.children.length -1] =
                        this.createArrayMap(input.children[i], output.children[output.children.length -1], length);
                }
            }
        }
        return output;
    }
&nbsp;
&nbsp;
    /*
     * Receives a map with an array with n values for every attribute as output and a map with a single value in every
     * attribute as input and a position. The values of the input are added to the correspondent value in the output
     * attribute array in the position given in position value.
     * The output map should contain every children and node in output.
     */
    fulfillMap(input: CodeMapNode, output: CodeMapNode, position: number){
        if(!input.children||!output.children||Object.keys(output.children).length==0||
            Object.keys(input.children).length==0){
            for(let metric in input.attributes){
                output.attributes[metric][position] = input.attributes[metric];
            }
        }
        else{
            //Go through every position in the maps
            for(let i: number=0; i&lt;input.children.length; i++) {
                for(let j: number=0;j&lt;output.children.length; j++){
                    if(input.children[i].name==output.children[j].name){
                        output.children[j]= this.fulfillMap(input.children[i],output.children[j],position);
                    }
                }
            }
        }
        retur<span class="missing-if-branch" title="else path not taken" >E</span>n output;
    }
&nbsp;
&nbsp;
    /*
    *  Returns a map which contains the same structure as the input map but contains no metric
    */
    emptyMap(output: any){
        if(output.root){
            output.root=this.emptyMap(output.root);
        }
        else if(output.children&amp;&amp;output.children.length!=0){
            for(var i=0;i&lt;output.children.length;i++){
                output.children[i]=this.emptyMap(output.children[i]);
            }
        }
        else if(output.attributes&amp;&amp;output.attributes.length!=0){
            output.attributes = {};
        }
        return output;
    }
&nbsp;
    /*
     * Receiv<span class="missing-if-branch" title="else path not taken" >E</span>es a map which contains an array in every attribute and returns an array with the same structure as the
     * input but with a function applied to the values of the same attribute array for every attribute.
     * This function is determinated by the string in operation
     */
    applyStatistics(input: any,output: any, operation: STATISTIC_OPS): any{
        //If the input has attributes, a function is applied to every metric and the returned value is given in output
        if(input.attributes&amp;&amp;Object.keys(input.attributes).length!=0){
            for(let metric in input.attributes){
                output.attributes[metric]=this.statistic(input.attributes[metric], operation);
            }
        }
        else if(input.children&amp;&amp;input.children.length!=0){
            //Go through every position in the maps
            for(let i=0; i&lt;input.children.length; i++) {
                output.children[i]= this.applyStatistics(input.children[i],output.children[i],operation);
            }
        }
        else if (input.root){
            output.root= this.applyStatistics(input.root,output.root,operation);
        }
        return output;
    }
<span class="branch-5 cbranch-no" title="branch not covered" ></span>
<span class="cstat-no" title="statement not covered" ></span>
    /*
     * F<span class="cstat-no" title="statement not covered" >unction tha</span>t returns the value of an statistical function over the values of the inputed array. This function
     * is defined by operation.
     * @param {STATISTICS_OPS} operation
     */
    statistic(input: number[], operation: STATISTIC_OPS): number{
        switch(operation) {
            case STATISTIC_OPS.MEAN:
                return this.mean(input);
            case STATISTIC_OPS.MAX:
                return this.max(input);
            case STATISTIC_OPS.MIN:
                return this.min(input);
            case STATISTIC_OPS.FASHION:
                return this.fashion(input);
            case STATISTIC_OPS.MEDIAN:
                return this.median(input);
            default:
                console.log("The described statistical function, which is "+operation+" does not exist");
        }
        return -1;
    }
&nbsp;
&nbsp;
    /*
     * Function that returns the mean of the values in the input array.
     */
    mean(input: number[]): number{
        var output: number = 0.0;
        for(var i: number=0;i&lt;input.length; i++){
            if(input[i] !== undefined){
                output+=input[i];
            }
        }
        output= output/input.length;
        return output;
    }
&nbsp;
    /*
     * Function that returns the highest value of the input array
     */
    max(input: number[]): number{
        var output: number;
        for(var i: number=0;i&lt;input.length; i++){
            if(input[i] !== undefined){
                if(output == undefined || output&lt;input[i]){
                    output=input[i];
                }
            }
        }
        return output;
    }
&nbsp;
    /*
     * Function that returns the lowest value of the input array
     */
    min(input: number[]): number{
        var output;
        for(var i: number=0;i&lt;input.length; i++){
            if(input[i] !== undefined){
                if(output == undefined || output&gt;input[i]){
                    output=input[i];
                }
            }
        }
        return output;
    }
&nbsp;
    /*
     * Function that returns the most common value in the input array
     */
    fashion(input: number[]): number{
        var frequency: any = {};//Object that contains every different value in input linked to its absolute frequency
        var fashion_frequency: number = 0;//Absolute frequency of the fashion value
        var fashion_value: number;
        for(var i: number=0;i&lt;input.length; i++){
            if(input[i] !== undefined){
                if(!frequency[input[i]]){
                    frequency[input[i]] = 1;
             <span class="missing-if-branch" title="if path not taken" >I</span>   }
<span class="cstat-no" title="statement not covered" >                else{</span>
                    frequency[input[i]]++;
                }
            }
        }
        for(let value in frequency){
            if(fashion_frequency&lt; frequency[value]){
                fashion_frequency=frequency[value];
                fashion_value= parseInt(value);
            }
        }
        return fashion_value;
    }
&nbsp;
    /*
     * Function that returns the median value in the input array
     */
    median(input: number[]): number{
        var sorted: number[] = input.filter(function(value) { return value !== undefined }).sort();
        var median: number;
        var num: number = sorted.length;
        if((num % 2) == 0){
            median = sorted[num/2];
        }
        else if (num &gt; 1){
            median = (sorted[(num+1)/2]+sorted[(num-1)/2])/2;
        }
        else{
            median = sorted[0];
        }
        return median;
    }
&nbsp;
    /*
     * Function that returns true when two objects contain the same even when it is not in the same order
     * ({a,b}=={b,a} would return true)
     * Only used in testing TODO such methods should not be implemented. Testing should not rely on test specific methods
     */
&nbsp;
    /*unorderedCompare(a: Object,b: Object): boolean{
        var same : boolean = false;
        //We check if we reached a leave. Falls that happened the
        if(Object.keys(a).length==0&amp;&amp;JSON.stringify(a) != JSON.stringify(b)){
            return false;
        }
        //If a key contained in a is not contained in b, has different type or different number of keys they are diff
        for(let key in a){
            if(!b[key]||typeof(b[key])!=typeof(a[key])||Object.keys(a[key]).length!=Object.keys(b[key]).length){
                return false;
            }
        }
        //Here is only reached if both a and b have the same keys and those values have the same type and number of keys
        for(let key in a){
            if(typeof(a[key])=="object"){//check if this works
                //if key is a number we look for a branch in b that has the same as this branch in a
                if(typeof (key)=="number"){
                    for(let keyb in b){
                        if(this.unorderedCompare(a[key],b[keyb])){
                            same= true;
                        }
                    }
                    if(!same){
                        return false;
                    }
                }
                //If the key is not a number we compare that branch in a with the branch with the same key in b
                else if(!this.unorderedCompare(a[key],b[key])){
                    return false;
                }
            }//if the value is not an object
            else if(a[key]!=b[key]){
                return false;
            }
        }
        return true;
    }*/
}</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Fri Jan 26 2018 15:21:38 GMT+0000 (UTC)
</div>
</div>
<script src="../../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../../sorter.js"></script>
</body>
</html>
